<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Compras</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

    <header class="bg-gray-800 text-white text-center py-4">
        <h1 class="text-2xl font-bold">ğŸ›’ Lista de Compras</h1>
    </header>

    <main class="flex-1 p-4">
        <div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">Selecciona los productos por categorÃ­a</h2>

            <!-- Barra de bÃºsqueda -->
            <div class="mb-4">
                <input id="search-bar" type="text" placeholder="Buscar productos..." class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>

            <!-- Selector de categorÃ­a -->
            <div class="mb-6">
                <label for="item-category" class="block text-sm font-medium text-gray-700 mb-2">Seleccionar categorÃ­a</label>
                <select id="item-category" class="w-full px-4 py-2 border rounded-lg">
                    <option value="Frutas y Verduras">ğŸ¥¦ Frutas y Verduras</option>
                    <option value="Carnes, Pescados y Huevos">ğŸ– Carnes, Pescados y Huevos</option>
                    <option value="LÃ¡cteos y Derivados">ğŸ¥› LÃ¡cteos y Derivados</option>
                    <option value="Cereales y Legumbres">ğŸŒ¾ Cereales y Legumbres</option>
                    <option value="Congelados">â„ï¸ Congelados</option>
                    <option value="Snacks y Dulces">ğŸ« Snacks y Dulces</option>
                    <option value="Productos de Desayuno y Merienda">â˜• Productos de Desayuno y Merienda</option>
                    <option value="Bebidas">ğŸ¥¤ Bebidas</option>
                    <option value="Productos de Higiene y Cuidado Personal">ğŸ§´ Productos de Higiene y Cuidado Personal</option>
                    <option value="Productos de Limpieza">ğŸ§¹ Productos de Limpieza</option>
                    <option value="Otros esenciales">ğŸŒŸ Otros esenciales</option>
                </select>
            </div>

            <!-- Lista de productos -->
            <div id="items-container" class="mb-6">
                <h3 class="text-lg font-semibold mb-2">Productos disponibles</h3>
                <ul id="available-items" class="space-y-2"></ul>
            </div>

            <!-- Lista de compras -->
            <div>
                <h3 class="text-lg font-semibold mb-2">Tu lista de compras</h3>
                <ul id="list-container" class="space-y-4"></ul>
            </div>

            <!-- BotÃ³n para limpiar la lista -->
            <div class="mt-4">
                <button id="clear-list" class="bg-red-500 text-white px-4 py-2 rounded-lg w-full hover:bg-red-600 transition duration-200">ğŸ—‘ï¸ Limpiar lista</button>
            </div>

            <!-- BotÃ³n para compartir -->
            <div class="mt-4">
                <button id="generate-link" class="bg-green-500 text-white px-4 py-2 rounded-lg w-full hover:bg-green-600 transition duration-200">ğŸ“¤ Compartir por WhatsApp</button>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white text-center py-4">
        <p> Desarrollado por Charlie BÃ©rgamo</p>
    </footer>

    <script>
        const availableItems = {
            "Frutas y Verduras": [
                "Bananas", "Manzanas", "Naranjas", "Uvas", "Peras", "Mandarinas", "Kiwi", "AnanÃ¡", "Cerezas", "MelÃ³n", "SandÃ­a",
                "Papaya", "Duraznos", "ArÃ¡ndanos", "Frutillas", "Mango", "Damascos", "Ciruelas", "PurÃ©s de fruta envasados",
                "Zanahorias", "Papas", "Cebollas", "Pimientos", "Zapallo", "Batatas", "Choclo", "Berenjenas", "Zucchini", "Remolacha",
                "Coliflor", "Espinaca", "Lechuga", "Acelga", "RÃºcula", "Kale", "Radicheta", "Tomates cherry", "Pepino", "Palta", "BrÃ³coli",
                "Hongos frescos", "Ajos", "Jengibre"
            ],
            "Carnes, Pescados y Huevos": [
                "Pollo (pechuga, muslos, alitas, entero)", "Carne vacuna (picada, milanesas, bife, lomo, roast beef)", "Cerdo (bondiola, costillas, carrÃ©, jamÃ³n crudo o cocido)",
                "Filetes de merluza", "SalmÃ³n", "Trucha", "Calamares", "Camarones", "Mejillones", "AtÃºn fresco", "AtÃºn enlatado",
                "Huevos de gallina", "Huevos de codorniz"
            ],
            "LÃ¡cteos y Derivados": [
                "Leche entera", "Leche descremada", "Leche fortificada para niÃ±os", "Leche deslactosada", "Leche de almendras", "Leche de avena",
                "Yogures naturales", "Yogures con frutas", "Yogures griegos", "Yogures bebibles", "Yogures probiÃ³ticos", "Queso cremoso",
                "Queso rallado", "Queso untable", "Queso en fetas", "Queso parmesano", "Ricota", "Mozzarella", "Queso azul", "Brie",
                "Gouda", "Cheddar", "Crema de leche", "Yogures para bebÃ©s"
            ],
            "Cereales y Legumbres": [
                "Avena", "Corn flakes", "Granola", "Arroz inflado", "Muesli", "Quinoa", "Amaranto", "Couscous", "Arroz blanco",
                "Arroz integral", "Arroz basmati", "Arroz jazmÃ­n", "Arroz carnaroli", "Fideos", "Tallarines", "Ravioles", "Ã‘oquis",
                "Lasagna", "Capellettis", "Lentejas", "Garbanzos", "Porotos negros", "Porotos rojos", "Porotos manteca", "Arvejas secas",
                "Pan lactal", "Pan integral", "Pan de molde", "Baguettes", "Pan de campo", "Grisines", "Muffins", "Medialunas",
                "Tortillas de maÃ­z", "Tortillas de trigo"
            ],
            "Congelados": [
                "Espinaca congelada", "Choclo congelado", "Mix para wok congelado", "BrÃ³coli congelado", "Arvejas congeladas", "Cebolla en cubos congelada",
                "Hamburguesas de carne", "Hamburguesas de vegetales", "Hamburguesas de pollo", "Hamburguesas de soja", "Papas fritas congeladas",
                "Papas noisettes congeladas", "Nuggets de pollo congelados", "Bastones de pescado congelados", "Frutillas congeladas", "Mango congelado",
                "Frutos rojos congelados"
            ],
            "Snacks y Dulces": [
                "Galletitas sin azÃºcar agregada", "Barras de cereal", "Frutas secas (almendras, nueces, pistachos, castaÃ±as)", "Frutas deshidratadas (pasas de uva, damascos, manzana, banana)",
                "Bocaditos de maÃ­z sin sal", "Chocolate amargo", "Turrones", "Alfajores", "Galletitas integrales", "Mix de frutos secos",
                "Helados", "Caramelos", "Bombones"
            ],
            "Productos de Desayuno y Merienda": [
                "CafÃ© molido", "CafÃ© en cÃ¡psulas", "CafÃ© instantÃ¡neo", "TÃ© negro", "TÃ© verde", "TÃ© de hierbas", "TÃ© chai", "Cacao en polvo",
                "Chocolate para taza", "Mermeladas (frutilla, durazno, ciruela, frutos rojos)", "Miel", "Dulce de leche clÃ¡sico",
                "Dulce de leche light", "Facturas", "Bizcochos", "Medialunas", "Galletitas dulces"
            ],
            "Bebidas": [
                "Agua mineral con gas", "Agua mineral sin gas", "Jugos naturales", "Jugos exprimidos", "Jugos en polvo", "Jugos en caja sin azÃºcar",
                "Leche chocolatada", "Gaseosas cola", "Gaseosas lima-limÃ³n", "Gaseosas de naranja", "Cervezas", "Vinos", "Aperitivos"
            ],
            "Productos de Higiene y Cuidado Personal": [
                "PaÃ±ales", "Toallitas hÃºmedas", "JabÃ³n neutro", "Shampoo infantil", "Crema hidratante para niÃ±os", "Shampoo para adultos",
                "Acondicionador", "Crema de afeitar", "Desodorantes", "Pasta dental infantil", "Pasta dental para adultos", "Toallas femeninas",
                "Tampones", "Copas menstruales", "Hisopos", "AlgodÃ³n", "Protector solar", "Repelente de insectos"
            ],
            "Productos de Limpieza": [
                "Detergente", "Lavandina", "Desinfectantes multiuso", "JabÃ³n para ropa lÃ­quido", "JabÃ³n para ropa en polvo", "Suavizante",
                "Papel higiÃ©nico", "Servilletas", "Papel absorbente", "Bolsas de residuos", "Esponjas", "Trapos de piso"
            ],
            "Otros esenciales": [
                "Aceite de oliva", "Aceite de girasol", "Aceite de coco", "AzÃºcar blanca", "AzÃºcar rubia", "AzÃºcar mascabo", "Sal comÃºn",
                "Sal marina", "Sal baja en sodio", "OrÃ©gano", "Pimienta", "PimentÃ³n", "Ajo en polvo", "Curry", "Comino", "Canela",
                "Vinagre de alcohol", "Vinagre de manzana", "Vinagre balsÃ¡mico", "Caldos de pollo", "Caldos de carne", "Caldos de verduras",
                "Harina comÃºn", "Harina leudante", "Harina integral", "Harina de almendras"
            ]
        };

        const itemCategorySelect = document.getElementById('item-category');
        const availableItemsList = document.getElementById('available-items');
        const listContainer = document.getElementById('list-container');
        const searchBar = document.getElementById('search-bar');
        const generateLinkBtn = document.getElementById('generate-link');
        const clearListBtn = document.getElementById('clear-list');

        let shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];
        let filteredItems = [];

        const renderAvailableItems = (category) => {
            availableItemsList.innerHTML = '';
            const items = availableItems[category].sort();
            filteredItems = items;
            items.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="flex items-center gap-2">
                        <input type="checkbox" class="form-checkbox" data-item="${item}" />
                        <span>${item}</span>
                    </div>
                `;
                availableItemsList.appendChild(li);
            });
        };

        const renderShoppingList = () => {
            listContainer.innerHTML = '';
            shoppingList.forEach(item => {
                const li = document.createElement('li');
                li.className = 'flex items-center gap-2';
                li.innerHTML = `
                    <span>${item}</span>
                    <button class="text-red-500 hover:text-red-700 ml-auto transition duration-200" data-remove="${item}">ğŸ—‘ï¸ Quitar</button>
                `;
                listContainer.appendChild(li);
            });
        };

        const updateLocalStorage = () => {
            localStorage.setItem('shoppingList', JSON.stringify(shoppingList));
        };

        generateLinkBtn.addEventListener('click', () => {
    const groupedList = Object.keys(availableItems).reduce((acc, category) => {
        const itemsInCategory = shoppingList.filter(item => availableItems[category].includes(item));
        if (itemsInCategory.length > 0) {
            acc.push(`${category}:\n${itemsInCategory.map(item => `- ${item}`).join('\n')}`);
        }
        return acc;
    }, []);

    const message = groupedList.length
        ? `AquÃ­ estÃ¡ mi lista de compras:\n\n${groupedList.join('\n\n')}`
        : 'Mi lista de compras estÃ¡ vacÃ­a.';
    const whatsappLink = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappLink, '_blank');
});


        clearListBtn.addEventListener('click', () => {
            shoppingList = [];
            updateLocalStorage();
            renderShoppingList();
        });

        itemCategorySelect.addEventListener('change', () => {
            const category = itemCategorySelect.value;
            renderAvailableItems(category);
        });

        availableItemsList.addEventListener('change', (e) => {
            if (e.target.checked) {
                shoppingList.push(e.target.dataset.item);
            } else {
                shoppingList = shoppingList.filter(item => item !== e.target.dataset.item);
            }
            shoppingList = [...new Set(shoppingList)];
            updateLocalStorage();
            renderShoppingList();
        });

        searchBar.addEventListener('input', (e) => {
            const searchText = e.target.value.toLowerCase();
            const results = filteredItems.filter(item => item.toLowerCase().includes(searchText));
            availableItemsList.innerHTML = '';
            results.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="flex items-center gap-2">
                        <input type="checkbox" class="form-checkbox" data-item="${item}" />
                        <span>${item}</span>
                    </div>
                `;
                availableItemsList.appendChild(li);
            });
        });

        listContainer.addEventListener('click', (e) => {
            if (e.target.dataset.remove) {
                shoppingList = shoppingList.filter(item => item !== e.target.dataset.remove);
                updateLocalStorage();
                renderShoppingList();
                renderAvailableItems(itemCategorySelect.value);
            }
        });

        renderAvailableItems(itemCategorySelect.value);
        renderShoppingList();
    </script>

</body>

</html>
